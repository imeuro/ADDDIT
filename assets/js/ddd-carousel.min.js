"use strict";let ADDDITCarousel;(ADDDITCarousel=function(){let n=ADDDITCarousel;n.dddCarouselConfig={},n.observerSlides=[],console.log("[ADDDITCarousel] init"),n.cbObserverSlides=(e,t)=>{for(const r of e)requestAnimationFrame(()=>{var s=r.target.parentElement,e=s.getAttribute("id");if(n.dddCarouselConfig[e]&&(1==r.intersectionRatio&&!r.target.classList.contains("dddCarouselItemActive")&&(n.dddCarouselConfig[e].classi&&r.target.classList.add("dddCarouselItemActive"),n.dddCarouselConfig[e].eventi&&(t=new CustomEvent("dddCarouselSlideAttivata",{detail:{carousel:s,carouselId:e,indexSlide:Array.from(s.children).indexOf(r.target)}}),document.dispatchEvent(t)),n.dddCarouselConfig[e].classi))){let e=s.querySelectorAll(":scope > .dddCarouselItem"),t=e.length,r;for(r=0;r<t;r++){var o=e[r].getBoundingClientRect();(o.left<0||o.right>document.body.clientWidth)&&e[r].classList.remove("dddCarouselItemActive")}}var t=r.target.previousElementSibling,s=(1==r.intersectionRatio&&null==t?document.querySelector(".dddCarouselPrev[data-target='#"+e+"']").classList.add("dddCarouselDisabled"):r.intersectionRatio<1&&null==t&&document.querySelector(".dddCarouselPrev[data-target='#"+e+"']").classList.remove("dddCarouselDisabled"),r.target.nextElementSibling);1==r.intersectionRatio&&null==s?document.querySelector(".dddCarouselNext[data-target='#"+e+"']").classList.add("dddCarouselDisabled"):r.intersectionRatio<1&&null==s&&document.querySelector(".dddCarouselNext[data-target='#"+e+"']").classList.remove("dddCarouselDisabled")})},n.observeSlides=function(e,t){let r=e.length,s;for(s=0;s<r;s++)n.observerSlides[t].observe(e[s]),e[s].classList.add("observerProcessed")},n.setObserversSlides=function(e){var t=e.getAttribute("id"),r=(console.log("[ADDDITCarousel] setObserver per id:",t),e.getAttribute("data-config")||null),s=(null!=r&&(n.dddCarouselConfig[t]=JSON.parse(r)),{root:e,rootMargin:"10px 10px 10px 10px",threshold:1});n.observerSlides[t]=new IntersectionObserver(n.cbObserverSlides,s);let o;o=null!=r?e.querySelectorAll(":scope > .dddCarouselItem"):e.querySelectorAll(":scope > .dddCarouselItem:first-child, :scope > .dddCarouselItem:last-child"),n.observeSlides(o,t)},n.outerWidth=function(e){var t=e.offsetWidth,e=getComputedStyle(e);return t+=parseInt(e.marginLeft)+parseInt(e.marginRight)},n.cbObserverCarousels=(e,t)=>{e.forEach(e=>{e.isIntersecting?(e.target.classList.add("dddCarouselInViewport"),n.setObserversSlides(e.target)):(e.target.classList.remove("dddCarouselInViewport"),e=e.target.getAttribute("id"),n.observerSlides[e]&&(n.observerSlides[e].disconnect(),console.log("[ADDDITCarousel] disconnect observer per id:",e)))})},n.observeCarousels=function(e){let t=e.length,r;for(r=0;r<t;r++)n.observerCarousels.observe(e[r])},n.setObserversCarousels=function(){n.observerCarousels=new IntersectionObserver(n.cbObserverCarousels,{rootMargin:"150px 10px 150px 10px",threshold:.01});var e=document.querySelectorAll(".dddCarousel");n.observeCarousels(e)},n.setControls=function(){let e=document.querySelectorAll(".dddCarouselControl:not(.dddCarouselProcessed)"),t,r=e.length;for(t=0;t<r;t++)e[t].addEventListener("click",function(e){e.preventDefault();let t;t=e.currentTarget.classList.contains("dddCarouselPrev")?-1:1;e=e.currentTarget.getAttribute("data-target");let l=document.querySelector(e);e=l.getAttribute("data-passo");let d=l.scrollLeft;var r=n.outerWidth(l.querySelector(".dddCarouselItem"));let a=Math.floor(d+r*e*t);a<0&&(a=0);var s=l.scrollWidth,o=l.offsetWidth,i=Math.round(d/r);if(d+o==s&&-1==t&&(a=Math.round(i-e)*r),"smooth"===getComputedStyle(l).scrollBehavior)requestAnimationFrame(function(){l.scrollTo({top:0,left:a})});else{console.log("[ADDDITCarousel] fallback per no smooth");let r=parseInt(l.getAttribute("data-time"))||300,s=(new Date).getTime(),o=setInterval(function(){requestAnimationFrame(function(){var e=Math.min(1,((new Date).getTime()-s)/r),t=d+e*(a-d)+0;1===e&&clearInterval(o),l.scrollLeft=t})},25)}}),e[t].classList.add("dddCarouselProcessed");n.setObserversCarousels()},n.setControls()})();